import{h as g,d as m,i as l,j as r,z as R,n as b,R as B,s as d,al as P,a as z,f as W,w as F,D as q,p as $,q as H,a3 as S,J as C,u as v,k as h,am as J,L as U,an as X,ao as Y,T as G,ap as K,a0 as V}from"./framework.8ca2bf6a.js";import{a as Q}from"./theme.71bc52eb.js";function I(e){const s=e.currentTarget,{offsetX:n,offsetY:i}=e,a=document.createElement("div");a.className="ripple-dom",a.style.left=n+"px",a.style.top=i+"px",s.appendChild(a),setTimeout(()=>{a.remove()},750)}const x={created(e){e.addEventListener("mousedown",I,!0)},beforeUnmount(e){e.removeEventListener("mousedown",I,!0)}};const Z=g({name:"j-icon"}),ee=g({...Z,props:{color:{},size:{default:"medium"},disabled:{type:Boolean,default:!1},icon:{default:null},hover:{type:Boolean,default:!0}},setup(e){const s=e,n=m(()=>["size_"+s.size]),i=m(()=>{const a={};return s.color&&(a.color=s.color),s.hover&&(a.cursor="pointer"),a});return(a,p)=>a.icon?(l(),r("div",{key:0,class:b(["j-icon",n.value]),style:B(i.value)},[R("i",{class:b(["iconfont",[a.icon]])},null,2)],6)):d("",!0)}}),E=e=>(e.install=s=>{const n=e.name;s.component(n,e)},e);function Ce(e){return Array.isArray(e)}const je=(e,s=0,n=100)=>Math.min(n,Math.max(s,e));function Be(e,{min:s,max:n}){return e/100*(n-s)+s}function Te(e,{min:s,max:n}){return(e-s)/(n-s)*100}const L=E(ee),se=["info","warning","success","error"];const f=P([]),ne={key:0,class:"j-message-icon"},te={class:"j-message-inner"},oe={key:0,class:"j-message-content"},ae=["innerHTML"],le={key:2},ie={key:1,class:"j-message-close"},ce=g({name:"j-alert"}),re=g({...ce,props:{showType:{default:"alert"},type:{default:"info"},message:{type:[String,Function,Object],default:""},closed:{type:Boolean,default:!1},onClose:{type:[Function,null],default:null},id:{default:null},defaultVisable:{type:Boolean,default:!0},duration:{default:3e3},showIcon:{type:Boolean,default:!1}},setup(e,{expose:s}){const n=e,i=20,a=m(()=>({info:"icon-jinggao",success:"icon-chenggong1",warning:"icon-xinxi-yuankuang",error:"icon-cuowuguanbiquxiao-yuankuang"})[n.type]),p=x,u=z(n.defaultVisable),o=z();let c=null;const D=m(()=>{const t=[];return n.type&&t.push(n.type),t}),N=m(()=>{const t={};if(n.showType==="alert")t.display="flex",t.zIndex=0;else if(n.showType==="pop-up"){let y=0;n.id&&(y=f.findIndex(O=>O.id===n.id)||0),t.display="inline-flex",t.position="fixed",t.left="50%",t.top=y*54+i+"px",t.marginTop=y*i+"px";const _=o.value;_&&(t.marginLeft=-_.clientWidth/2+"px")}return t});function T(){u.value=!0}function k(){u.value=!1}const M=()=>{n.duration!==0&&(w(),c=setTimeout(()=>{k()},n.duration))},w=()=>{c&&clearTimeout(c)};return W(()=>{if(n.showType==="pop-up"){T(),M();const{isOutside:t}=Q(o);F(t,y=>{!y&&c?w():M()})}}),q(()=>{c&&w()}),s({open:T,close:k}),(t,y)=>(l(),$(G,{"on-before-leave":t.onClose,name:"j-message"},{default:H(()=>[u.value?S((l(),r("div",{key:0,ref_key:"jMessageRef",ref:o,class:b(["j-message",D.value]),style:B(N.value)},[t.showIcon?(l(),r("div",ne,[C(v(L),{icon:a.value},null,8,["icon"])])):d("",!0),R("div",te,[typeof t.message=="string"?(l(),r("div",oe,[t.$slots.default?h(t.$slots,"default",{key:0}):typeof t.message=="string"?(l(),r("span",{key:1,innerHTML:t.message},null,8,ae)):J(t.message)?(l(),r("div",le,[(l(),$(U(t.message),X(Y(t.message.props)),null,16))])):d("",!0)])):d("",!0)]),t.closed?(l(),r("div",ie,[C(v(be),{onClick:k,icon:"icon-close",size:"so-small","icon-btn":""})])):d("",!0)],6)),[[v(p)]]):d("",!0)]),_:3},8,["on-before-leave"]))}});let ue=1;const de=se,A=e=>({...e,showType:"pop-up",defaultVisable:!1});function fe(){return document.createDocumentFragment()}function pe(e){const s=fe(),n=e.mount(s);return document.body.appendChild(s),n}const me=e=>{const s=f.indexOf(e);s!==-1&&(f.splice(s,1),setTimeout(()=>{e.app.unmount()},300))};function ye(e){const s=`j-message-${ue++}`,n=e.onClose,i={...e,id:s,onClose:()=>{n==null||n(),me(u)}},a=K(re,i),p=pe(a),u={id:s,app:a,vm:p,props:i,handler:{close(){p.close()}}};return u}const j=e=>{e=A(e);const s=ye(e);return f.push(s),s.handler};de.forEach(e=>{j[e]=s=>(s=A(s),j({...s,type:e}))});j.closeAll=e=>{if(f.length)for(const s in f)(!e||f[s].props.type===e)&&f[s].handler.close()};const ge=["disabled"],ve=g({name:"j-button"}),he=g({...ve,props:{type:{default:""},size:{default:"medium"},disabled:{type:Boolean,default:!1},btnType:{},icon:{default:null},iconBtn:{type:Boolean,default:!1},block:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:s}){const n=e,i=x,a=m(()=>{const o=[n.type,n.size];return n.disabled&&o.push("disabled"),n.iconBtn&&o.push("icon-btn"),o}),p=m(()=>{const o={};return n.block&&(o.display="flex"),o}),u=o=>{n.disabled||s("click",o)};return(o,c)=>S((l(),r("div",{disabled:o.disabled,class:b(["j-button",a.value]),onClick:u,style:B(p.value)},[h(o.$slots,"icon",{},()=>[o.icon||o.iconBtn?(l(),r("div",{key:0,onMousedown:c[0]||(c[0]=V(()=>{},["stop","prevent"])),class:"j-button-icon"},[C(v(L),{size:o.size,icon:o.icon},null,8,["size","icon"])],32)):d("",!0)]),o.iconBtn?d("",!0):(l(),r("div",{key:0,onMousedown:c[1]||(c[1]=V(()=>{},["stop","prevent"])),class:"j-button-text"},[h(o.$slots,"default")],32)),h(o.$slots,"icon-right")],14,ge)),[[v(i)]])}}),be=E(he);export{be as B,L as I,re as _,Be as a,Te as b,je as c,x as d,Ce as i,j as m,E as w};
